<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>Test Suite Coverage Analysis</title>
    <link rel='stylesheet' href='coverage.css'>
  </head>
  <body>
    <h1>Test Suite Coverage Analysis</h1>
    <p>
      The following tables summarise test coverage for the specifications contained in this
      test suite.
    </p>
    <div>
      <h4>Show levels:</h4>
      <p>
        The report analyses sections at a maximal depth of 3. If you want to see an overview
        at section levels 1 or 2 instead, you can choose those options below.
      </p>
      <ul>
        <li>Level 1 <input type='radio' name='level' value='1' checked></li>
        <li>Level 2 <input type='radio' name='level' value='2'></li>
        <li>Level 3 <input type='radio' name='level' value='3'></li>
      </ul>
      
      <p>
        <label><input type='checkbox' name='reqs-only' id="reqs-only" checked> Only show sections with requirements.</label>
      </p>
    </div>
    <div>
      <h4>Thresholds:</h4>
      <p>
        Picking a good ratio of tests to something (or something to test) is difficult.
        You can set values for specific aspects below. I assume that at some point we
        will come up with a more or less definitive set of values to roughly aim for.
      </p>
      <ul>
        <li>Tests per RFC2119: <input type='number' name='rfc2119' size='4' value='4'></li>
        <li>Tests per algorithm step: <input type='number' name='algos' size='4' value='2'></li>
        <li>Tests per IDL SLOC: <input type='number' name='idl' size='4' value='5'> Assume idlharness gives <input type='number' name='assume-idl' id="assume-idl" size='4' value='85'>% coverage of IDL.</li>

        <li>Tests per CSS property definition SLOC: <input type='number' name='propdef' size='4' value='5'></li>
      </ul>
      
      <p>
        <label><input type='checkbox' name='show-details' id="show-details"> Show detailed coverage data.</label>
      </p>
      <h4>Cost:</h4>
      <ul>
        <li>Estimated cost per test: $<input type='test-cost' name='test-cost' size='4' value='40'></li>
        <li>Estimated cost per test review: $<input type='review-cost' name='review-cost' size='4' value='8'></li>
      </ul>
      <button id='update'>Update</button>
    </div>


    <div id='output'></div>
    <ul id=color-coding>
      <li style="background-color:#0F0">80 - 100%</li>
      <li style="background-color:#CF6">60 - 79%</li>
      <li style="background-color:#FF6">40 - 69%</li>
      <li style="background-color:#FC6">20 - 39%</li>
      <li style="background-color:#F00">0 - 19%</li>
    </ul>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
    <script src='coverage.js'></script>
    <script>
    $.getJSON("specs.json", function (data) {
        cover(Object.keys(data).map(function(k) {
            return data[k];
        }).filter(function(s) {
            return s.publisher === "W3C";
        }), $("#output"));
    });
    </script>
  </body>
</html>
